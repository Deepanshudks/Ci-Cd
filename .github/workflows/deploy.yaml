name : Build and deploy to Docker hub

on:
  push:
    branches:
      -main
      -master

jobs:
  build-and-push:
    runs-on: ubuntu-latest
    steps:
      -name: Check out repo
       uses : actions/checkout@v2

      -name : Login to docker hub
       uses : docker/login-action@v1
       with : 
        username : ${{secret.DOCKER_USERNAME}}
        password : ${{secret.DOCKER_PASSWORD}}

      -name : "Build & Push Docker image"
       uses : docker/build-push-action@v2
       with : 
        context: .
        file : ./docker/Dockerfile.user
        push : true
        tags: deepanshudks/nextapp:latest

      -name : Verify Pushed Image
       run : docker pull deepanshudks/nextapp:latest